#include <hidef.h>      /* common defines and macros */
#include "derivative.h"      /* derivative-specific definitions */
#include "LCD.h"

#define delay(d); for (delay = d/2; delay != 0; delay--) asm NOP;

unsigned int delay; 

char *temp;
double acp;

void main(void) {
  /* put your own code here */
   
   LCDInit();
   LCDClearDisplay();
    DDRB = 0xF0;			//	????????? ????? ????? ??????? ????? ?? ????, ??????? ?? ?????
  	PUCR |= 0x02;			// 	????????? ????????????? ????????? ? ????? ?
  	PORTB = 0xF0;			// 	?????????? ????????

  	ATDCTL2 |= 0x82; //	????????? ??? ? ?????????? ?? ?????????? ??? ??????????????. 

  	delay(50); // 	???????? ? 50 ???. ?????????? ??? ????, ????? ?????????? ?????????? ??? ?????? ? ??????? ????????? ????? ??? ?????????. 

  	//	????????? ?????????? ?????????????? ? ?????? ?????????????????? ?????? ???????
  	//	??? ??????????, ????? ?????? ?????????? ????????? ???????????
  	ATDCTL3 = 0x04;			//	????????? ??????? ???????????? (fclock/2 = 2???) ? 8-??????? ?????????? ???
  	ATDCTL4 |= 0x80;		//	????? ? ???????? ????? ??????????? ????? ????? 5 ????? AD. 
  	//	????????? ?????????????? ?????? ?????? ? ???????????? ???????????? ??? ?????????? ?????.  
  	ATDCTL5 = 0x05; 
    
   
        

	EnableInterrupts;


  for(;;) {
    _FEED_COP(); /* feeds the dog */
  } /* loop forever */
  /* please make sure that you never leave main */
  
  
}
  interrupt 22 void ATD0() //	??????? ??????????
  {

   LCDCursorAtHome();
  // acp =  ATDDR0H;
   
   temp = (char*)ATDDR0H;

   LCDPutString(temp);
   
	ATDCTL5 = 0x05; 	// 	????????????? ?????? ??????
}
  
